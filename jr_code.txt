import edu.ucdavis.jr.JR;
import java.util.LinkedList;
import java.util.Queue;
import java.util.Random;

public class exercise_18 {
    private static Queue<Integer> products_list = LinkedList<>();
    private static int index_list = 50;

    private static process Consumer{
        while (!products_list.isEmpty()) {
            System.out.println("Consumer remove in products list... Product [" + products_list.poll()+"]");
        }
    }

    private static process Producer{
        Random random = new Random();

        for (int i = 1; i <= index_list; i++) {
            int random_int = random.nextInt(100) + 1;
            products_list.add(random_int);
            System.out.println("Producer add in products list... Product [" + products_list.peek() + "]");
        }
    }

    public static void main(String[] args) {
        try {
			JR.registerQuiescenceAction(end);
		} catch (edu.ucdavis.jr.QuiescenceRegistrationException e) {
			e.printStackTrace();
		}
    }

    private static op void end(){
        System.out.println("This is the end...");
    }
}

--------------------------------------------------------------------
error 1.0
root@0a37ad62b4be:/jr_code/Example/exercise_18# jr exercise_18
Note: jrGen/exercise_18.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
JR runtime error in "Thread-4" edu.ucdavis.jr.jrRuntimeError: Unhandled exception: java.lang.NullPointerException at exercise_18.ProducervoidTovoid(exercise_18.java:370) (details below)
JR runtime error in "Thread-3" edu.ucdavis.jr.jrRuntimeError: Unhandled exception: java.lang.NullPointerException at exercise_18.ConsumervoidTovoid(exercise_18.java:172) (details below)
Exception in thread "Thread-4" edu.ucdavis.jr.jrRuntimeError: Unhandled exception: java.lang.NullPointerException at exercise_18.ProducervoidTovoid(exercise_18.java:370)
	at exercise_18.ProducervoidTovoid(exercise_18.java:410)
	at exercise_18.access$100(exercise_18.java:13)
	at exercise_18$ProcOp_voidTovoid_implProducer$sendThread.run(exercise_18.java:266)
	at java.lang.Thread.run(Thread.java:748)
java.rmi.NoSuchObjectException: object not exported
	at sun.rmi.transport.ObjectTable.unexportObject(ObjectTable.java:153)
	at java.rmi.server.UnicastRemoteObject.unexportObject(UnicastRemoteObject.java:370)
	at edu.ucdavis.jr.jrx.jrvm.unregisterAllRemote(jrvm.java:511)
	at edu.ucdavis.jr.jrRuntimeError.<init>(jrRuntimeError.java:37)
	at exercise_18.ConsumervoidTovoid(exercise_18.java:212)
	at exercise_18.access$000(exercise_18.java:13)
	at exercise_18$ProcOp_voidTovoid_implConsumer$sendThread.run(exercise_18.java:68)
	at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-3" edu.ucdavis.jr.jrRuntimeError: Unhandled exception: java.lang.NullPointerException at exercise_18.ConsumervoidTovoid(exercise_18.java:172)
	at exercise_18.ConsumervoidTovoid(exercise_18.java:212)
	at exercise_18.access$000(exercise_18.java:13)
	at exercise_18$ProcOp_voidTovoid_implConsumer$sendThread.run(exercise_18.java:68)
	at java.lang.Thread.run(Thread.java:748)
Contact with a VM on 0a37ad62b4be has been lost ... exiting

error 2.0
root@0a37ad62b4be:/jr_code/Example/exercise_18# jr exercise_18
exercise_18.jr:7: illegal start of type
    private static Queue<Integer> products_list = new LinkedList<>();
                                                                 ^
exercise_18.jr:7: > expected
    private static Queue<Integer> products_list = new LinkedList<>();
                                                                    ^
Not generating any jrGen files due to errors.
2 errors


